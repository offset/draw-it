<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Draw it!: LineFinder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Draw it!
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classLineFinder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LineFinder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="linefinder_8hpp_source.html">linefinder.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9a83317df7ff3d74a9add150962e849"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#ac9a83317df7ff3d74a9add150962e849">LineFinder</a> ()</td></tr>
<tr class="separator:ac9a83317df7ff3d74a9add150962e849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffb60e7c12143a6824b884239243da9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a4ffb60e7c12143a6824b884239243da9">setAccResolution</a> (double dRho, double dTheta)</td></tr>
<tr class="separator:a4ffb60e7c12143a6824b884239243da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76de2e78cc28b37fd15652e2967e56b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#af76de2e78cc28b37fd15652e2967e56b">setMinVote</a> (int minv)</td></tr>
<tr class="separator:af76de2e78cc28b37fd15652e2967e56b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7655dc9adfaca75ed92c585d226a60df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a7655dc9adfaca75ed92c585d226a60df">setLineLengthAndGap</a> (double length, double gap)</td></tr>
<tr class="separator:a7655dc9adfaca75ed92c585d226a60df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0567e29363788ba519cff1f1f6686d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::Vec4i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#adb0567e29363788ba519cff1f1f6686d">findLines</a> (cv::Mat &amp;binary)</td></tr>
<tr class="separator:adb0567e29363788ba519cff1f1f6686d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20781cdf8620689b78c221d1f30371f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#aa20781cdf8620689b78c221d1f30371f">drawDetectedLines</a> (cv::Mat &amp;image, cv::Scalar color=cv::Scalar(255, 255, 255), int scaleFactorRows=-1, int scaleFactorCols=-1)</td></tr>
<tr class="separator:aa20781cdf8620689b78c221d1f30371f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe5f72054ba400611549ea25c25904e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::Vec4i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a4fe5f72054ba400611549ea25c25904e">refineDetectedLines</a> (float minDifference=0.05f)</td></tr>
<tr class="separator:a4fe5f72054ba400611549ea25c25904e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dbb0089ad37b33bdd904e1347775098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a7dbb0089ad37b33bdd904e1347775098">alignLinesToGrid</a> (cv::Mat &amp;image)</td></tr>
<tr class="separator:a7dbb0089ad37b33bdd904e1347775098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9aa51b43bb797b324305d3c89f5145f"><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#ad9aa51b43bb797b324305d3c89f5145f">createSkeleton</a> (cv::Mat &amp;image, int threshold=127)</td></tr>
<tr class="memdesc:ad9aa51b43bb797b324305d3c89f5145f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a refined image by removing outer pixels of the structures in the image.  <a href="#ad9aa51b43bb797b324305d3c89f5145f"></a><br/></td></tr>
<tr class="separator:ad9aa51b43bb797b324305d3c89f5145f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2dfe1367c2dd671f23a49304fe5240b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#ad2dfe1367c2dd671f23a49304fe5240b">saveToVec</a> (cv::Mat image)</td></tr>
<tr class="memdesc:ad2dfe1367c2dd671f23a49304fe5240b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the image in a format SFML can read for further processing.  <a href="#ad2dfe1367c2dd671f23a49304fe5240b"></a><br/></td></tr>
<tr class="separator:ad2dfe1367c2dd671f23a49304fe5240b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac9a83317df7ff3d74a9add150962e849"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LineFinder::LineFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7dbb0089ad37b33bdd904e1347775098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::alignLinesToGrid </td>
          <td>(</td>
          <td class="paramtype">cv::Mat &amp;&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad9aa51b43bb797b324305d3c89f5145f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat LineFinder::createSkeleton </td>
          <td>(</td>
          <td class="paramtype">cv::Mat &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>127</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a refined image by removing outer pixels of the structures in the image. </p>
<dl class="section author"><dt>Author</dt><dd>zemann <pre class="fragment">  The function makes sure that the image is grayscale, then applies a inverted threshold on it to obtain a binary image.
  In a loop, which ends when all pixels of the image are zero, the image is opened to remove unneccessary pixels,
  then this opened image is subtracted from the original image, which is in return copied to skeleton.
  At last, the image is eroded. This then is the starting image for the next iteration. The skeleton is returned.
  The function is based on this blog entry:
  http://felix.abecassis.me/2011/09/opencv-morphological-skeleton

  \param image[in,out]: The image to use for generating the skeleton. NOTE: This image is all zero at the end.
  \param threshold[in]: optional parameter for specifing the threshold limit. The mode is always THRESH_BINARY.

  @return The created skeleton image.</pre> </dd></dl>

</div>
</div>
<a class="anchor" id="aa20781cdf8620689b78c221d1f30371f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::drawDetectedLines </td>
          <td>(</td>
          <td class="paramtype">cv::Mat &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cv::Scalar&#160;</td>
          <td class="paramname"><em>color</em> = <code>cv::Scalar(255,&#160;255,&#160;255)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scaleFactorRows</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scaleFactorCols</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adb0567e29363788ba519cff1f1f6686d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; cv::Vec4i &gt; LineFinder::findLines </td>
          <td>(</td>
          <td class="paramtype">cv::Mat &amp;&#160;</td>
          <td class="paramname"><em>binary</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4fe5f72054ba400611549ea25c25904e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;cv::Vec4i&gt; LineFinder::refineDetectedLines </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>minDifference</em> = <code>0.05f</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad2dfe1367c2dd671f23a49304fe5240b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; LineFinder::saveToVec </td>
          <td>(</td>
          <td class="paramtype">cv::Mat&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the image in a format SFML can read for further processing. </p>
<dl class="section author"><dt>Author</dt><dd>zemann <pre class="fragment">  Firstly the function resizes a copy of the image (same size) and the lines depending on their size:
  &lt; 512px: no rescale
  up to 1024: scale 2
  up to 2048: scale 4
  &gt; 2048: scale 6
  NOTE: These limits and scales were chosen quite randomly and may change in the next revision.
  Then the lines are drawn on the (grayscale) copy and a sort of a 'threshold' is performed:
  If the pixel value is unequal 0, the corresponding value in a vector of a vector of int (represents the image)
  is set to 1 (line), otherwise to 0.
  This may change in the future because a certain number could be used for certain terrain objects (walls, obstacles, etc.).

  \param image[in]: The image to be saved

  @return vector of a vector of int containing the line information.</pre> </dd></dl>

</div>
</div>
<a class="anchor" id="a4ffb60e7c12143a6824b884239243da9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setAccResolution </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dRho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dTheta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7655dc9adfaca75ed92c585d226a60df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setLineLengthAndGap </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af76de2e78cc28b37fd15652e2967e56b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setMinVote </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="linefinder_8hpp_source.html">linefinder.hpp</a></li>
<li><a class="el" href="linefinder_8cpp.html">linefinder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
