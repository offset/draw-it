<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Draw it!: LineFinder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Draw it!
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classLineFinder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LineFinder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="linefinder_8hpp_source.html">linefinder.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9a83317df7ff3d74a9add150962e849"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#ac9a83317df7ff3d74a9add150962e849">LineFinder</a> ()</td></tr>
<tr class="separator:ac9a83317df7ff3d74a9add150962e849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffb60e7c12143a6824b884239243da9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a4ffb60e7c12143a6824b884239243da9">setAccResolution</a> (double dRho, double dTheta)</td></tr>
<tr class="separator:a4ffb60e7c12143a6824b884239243da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76de2e78cc28b37fd15652e2967e56b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#af76de2e78cc28b37fd15652e2967e56b">setMinVote</a> (int minv)</td></tr>
<tr class="separator:af76de2e78cc28b37fd15652e2967e56b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7655dc9adfaca75ed92c585d226a60df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a7655dc9adfaca75ed92c585d226a60df">setLineLengthAndGap</a> (double length, double gap)</td></tr>
<tr class="separator:a7655dc9adfaca75ed92c585d226a60df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd5e230f01feaecbc0f138ee3da504bf"><td class="memItemLeft" align="right" valign="top">cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#abd5e230f01feaecbc0f138ee3da504bf">getImage</a> ()</td></tr>
<tr class="separator:abd5e230f01feaecbc0f138ee3da504bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2769bdd5845ce23539d6abce15aa0814"><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::Vec4i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a2769bdd5845ce23539d6abce15aa0814">getLines</a> ()</td></tr>
<tr class="memdesc:a2769bdd5845ce23539d6abce15aa0814"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the detected lines.  <a href="#a2769bdd5845ce23539d6abce15aa0814">More...</a><br/></td></tr>
<tr class="separator:a2769bdd5845ce23539d6abce15aa0814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238c97d0b07eae22b1dcce4201309771"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a238c97d0b07eae22b1dcce4201309771">setImage</a> (std::string filePath)</td></tr>
<tr class="separator:a238c97d0b07eae22b1dcce4201309771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798b342c3ac2cc0f20145b16761ff701"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a798b342c3ac2cc0f20145b16761ff701">setImage</a> (cv::Mat image)</td></tr>
<tr class="separator:a798b342c3ac2cc0f20145b16761ff701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f516bf30904fa0037d19ab1d6306c15"><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::Vec4i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a7f516bf30904fa0037d19ab1d6306c15">findLines</a> ()</td></tr>
<tr class="separator:a7f516bf30904fa0037d19ab1d6306c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a538e8d3ab154e53bdbe379f55c322530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a538e8d3ab154e53bdbe379f55c322530">drawDetectedLines</a> (cv::Scalar color=cv::Scalar(255, 255, 255))</td></tr>
<tr class="separator:a538e8d3ab154e53bdbe379f55c322530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe5f72054ba400611549ea25c25904e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::Vec4i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a4fe5f72054ba400611549ea25c25904e">refineDetectedLines</a> (float minDifference=0.05f)</td></tr>
<tr class="separator:a4fe5f72054ba400611549ea25c25904e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac075a64fd7e52769fae9b78c337e00e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#ac075a64fd7e52769fae9b78c337e00e1">createSkeleton</a> (int threshold=127)</td></tr>
<tr class="memdesc:ac075a64fd7e52769fae9b78c337e00e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a refined image by removing outer pixels of the structures in the image.  <a href="#ac075a64fd7e52769fae9b78c337e00e1">More...</a><br/></td></tr>
<tr class="separator:ac075a64fd7e52769fae9b78c337e00e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d011cf00154adb96a37a75773017dc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#a16d011cf00154adb96a37a75773017dc">saveToVec</a> ()</td></tr>
<tr class="memdesc:a16d011cf00154adb96a37a75773017dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the image in a format SFML can read for further processing.  <a href="#a16d011cf00154adb96a37a75773017dc">More...</a><br/></td></tr>
<tr class="separator:a16d011cf00154adb96a37a75773017dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af42fca457731b5911f4b9787f5ad0b15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineFinder.html#af42fca457731b5911f4b9787f5ad0b15">drawLinePoints</a> ()</td></tr>
<tr class="memdesc:af42fca457731b5911f4b9787f5ad0b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the beginning and the ending of a detected line on the original image. For debugging purposes.  <a href="#af42fca457731b5911f4b9787f5ad0b15">More...</a><br/></td></tr>
<tr class="separator:af42fca457731b5911f4b9787f5ad0b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac9a83317df7ff3d74a9add150962e849"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LineFinder::LineFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac075a64fd7e52769fae9b78c337e00e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::createSkeleton </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>127</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a refined image by removing outer pixels of the structures in the image. </p>
<dl class="section author"><dt>Author</dt><dd>zemann</dd></dl>
<p>The function makes sure that the image is grayscale, then applies a inverted threshold on it to obtain a binary image. In a loop, which ends when all pixels of the image are zero, the image is opened to remove unneccessary pixels, then this opened image is subtracted from the original image, which is in return copied to skeleton. At last, the image is eroded. This then is the starting image for the next iteration. The skeleton is returned. The function is based on this blog entry: <a href="http://felix.abecassis.me/2011/09/opencv-morphological-skeleton">http://felix.abecassis.me/2011/09/opencv-morphological-skeleton</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threshold[in],:</td><td>optional parameter for specifing the threshold limit. The mode is always THRESH_BINARY.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The created skeleton image. </dd></dl>

</div>
</div>
<a class="anchor" id="a538e8d3ab154e53bdbe379f55c322530"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::drawDetectedLines </td>
          <td>(</td>
          <td class="paramtype">cv::Scalar&#160;</td>
          <td class="paramname"><em>color</em> = <code>cv::Scalar(255,&#160;255,&#160;255)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af42fca457731b5911f4b9787f5ad0b15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::drawLinePoints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws the beginning and the ending of a detected line on the original image. For debugging purposes. </p>

</div>
</div>
<a class="anchor" id="a7f516bf30904fa0037d19ab1d6306c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; cv::Vec4i &gt; LineFinder::findLines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abd5e230f01feaecbc0f138ee3da504bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat &amp; LineFinder::getImage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2769bdd5845ce23539d6abce15aa0814"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; cv::Vec4i &gt; LineFinder::getLines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the detected lines. </p>
<dl class="section return"><dt>Returns</dt><dd>lines </dd></dl>

</div>
</div>
<a class="anchor" id="a4fe5f72054ba400611549ea25c25904e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;cv::Vec4i&gt; LineFinder::refineDetectedLines </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>minDifference</em> = <code>0.05f</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a16d011cf00154adb96a37a75773017dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; LineFinder::saveToVec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the image in a format SFML can read for further processing. </p>
<dl class="section author"><dt>Author</dt><dd>zemann</dd></dl>
<p>Firstly the function resizes a copy of the image (same size) and the lines depending on their size: &lt; 512px: no rescale up to 1024: scale 2 up to 2048: scale 4 </p>
<blockquote class="doxtable">
<p>2048: scale 6</p>
<p></p>
</blockquote>
<p>NOTE: These limits and scales were chosen quite randomly and may change in the next revision. Then the lines are drawn on the (grayscale) copy and a sort of a 'threshold' is performed: If the pixel value is unequal 0, the corresponding value in a vector of a vector of int (represents the image) is set to 1 (line), otherwise to 0. This may change in the future because a certain number could be used for certain terrain objects (walls, obstacles, etc.).</p>
<dl class="section return"><dt>Returns</dt><dd>vector of a vector of int containing the line information. </dd></dl>

</div>
</div>
<a class="anchor" id="a4ffb60e7c12143a6824b884239243da9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setAccResolution </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dRho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dTheta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a238c97d0b07eae22b1dcce4201309771"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LineFinder::setImage </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a798b342c3ac2cc0f20145b16761ff701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LineFinder::setImage </td>
          <td>(</td>
          <td class="paramtype">cv::Mat&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7655dc9adfaca75ed92c585d226a60df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setLineLengthAndGap </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af76de2e78cc28b37fd15652e2967e56b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineFinder::setMinVote </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="linefinder_8hpp_source.html">linefinder.hpp</a></li>
<li><a class="el" href="linefinder_8cpp.html">linefinder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
